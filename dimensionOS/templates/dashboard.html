{% extends "base.html" %}

{% block title %}Dashboard - DimensionOS{% endblock %}

{% block content %}
<div class="dashboard">
    <!-- Top Bar with Query -->
    <div class="top-bar">
        <div class="query-container">
            <div class="query-glyph">◈</div>
            <input type="text" id="query-input" class="query-input" placeholder="Ask anything... (e.g., 'Load bitcoin', 'What is the price?')">
            <button id="query-submit" class="query-submit">
                <svg viewBox="0 0 24 24" class="submit-icon"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/></svg>
            </button>
        </div>
        <div class="user-info">
            <img src="{{ user.picture }}" alt="{{ user.name }}" class="user-avatar-small">
            <span>{{ user.name }}</span>
            <a href="/logout" class="btn-logout-small">Logout</a>
        </div>
    </div>

    <!-- Main Layout: Left Panel | Center | Right Panel -->
    <div class="main-layout">
        <!-- Left Panel: Dimensional Tree Navigator -->
        <div class="left-panel panel-glass">
            <div class="panel-header">
                <h3>Dimensional Tree</h3>
                <button class="btn-icon" title="Refresh">
                    <svg viewBox="0 0 24 24"><path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/></svg>
                </button>
            </div>
            <div class="tree-container" id="tree-container">
                <div class="tree-empty">
                    <p>No objects yet</p>
                    <p class="hint">Try: "Load bitcoin" or "Load 2026 Toyota Corolla"</p>
                </div>
            </div>
        </div>

        <!-- Center Panel: Views -->
        <div class="center-panel">
            <!-- View Tabs -->
            <div class="view-tabs">
                <button class="view-tab active" data-view="icon">Icon View</button>
                <button class="view-tab" data-view="table">Table View</button>
                <button class="view-tab" data-view="dimensional">Dimensional View</button>
            </div>

            <!-- Icon View -->
            <div class="view-content view-icon active" id="view-icon">
                <div class="icon-grid" id="icon-grid">
                    <div class="empty-state">
                        <div class="empty-icon">◈</div>
                        <h3>No Objects Loaded</h3>
                        <p>Use the query box above to ingest objects</p>
                    </div>
                </div>
            </div>

            <!-- Table View -->
            <div class="view-content view-table" id="view-table">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Type</th>
                            <th>Truth (Identity)</th>
                            <th>Dimensions</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="table-body">
                        <tr class="empty-row">
                            <td colspan="5">No objects loaded</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- Dimensional View -->
            <div class="view-content view-dimensional" id="view-dimensional">
                <div class="dimensional-canvas" id="dimensional-canvas">
                    <div class="empty-state">
                        <div class="empty-icon">◆</div>
                        <h3>Dimensional Traversal</h3>
                        <p>3D visualization of dimensional hierarchy</p>
                    </div>
                </div>
            </div>

            <!-- Query Response Area -->
            <div class="response-area" id="response-area">
                <!-- Responses appear here -->
            </div>
        </div>

        <!-- Right Panel: Attribute Drawer -->
        <div class="right-panel panel-glass">
            <div class="panel-header">
                <h3>Attributes</h3>
            </div>
            <div class="attributes-container" id="attributes-container">
                <div class="attributes-empty">
                    <p>Select an object to view attributes</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Bottom Bar: Connectors -->
    <div class="bottom-bar">
        <div class="connectors">
            <button class="connector-btn" data-connector="gdrive" title="Google Drive">
                <svg viewBox="0 0 24 24"><path d="M7.71 3.5L1.15 15l3.42 6.01L11.13 9.5 7.71 3.5M16.29 3.5l-3.42 6h6.84l3.42-6h-6.84M12 10.5L5.44 21h13.12L12 10.5z"/></svg>
            </button>
            <button class="connector-btn" data-connector="dropbox" title="Dropbox">
                <svg viewBox="0 0 24 24"><path d="M6 1.5l-6 4 6 4 6-4-6-4zm12 0l-6 4 6 4 6-4-6-4zm-12 13l-6-4-6 4 6 4 6-4zm12 0l-6-4-6 4 6 4 6-4zm-6 5.5l-6-4-6 4 6 4 6-4z"/></svg>
            </button>
            <button class="connector-btn" data-connector="api" title="API Connection">
                <svg viewBox="0 0 24 24"><path d="M13 13v8h8v-8h-8zM3 21h8v-8H3v8zM3 3v8h8V3H3zm13.66-1.31L11 7.34 16.66 13l5.66-5.66-5.66-5.65z"/></svg>
            </button>
            <button class="connector-btn" data-connector="database" title="Database">
                <svg viewBox="0 0 24 24"><path d="M12 3C7.58 3 4 4.79 4 7s3.58 4 8 4 8-1.79 8-4-3.58-4-8-4zM4 9v3c0 2.21 3.58 4 8 4s8-1.79 8-4V9c0 2.21-3.58 4-8 4s-8-1.79-8-4zm0 5v3c0 2.21 3.58 4 8 4s8-1.79 8-4v-3c0 2.21-3.58 4-8 4s-8-1.79-8-4z"/></svg>
            </button>
        </div>
        <div class="status-indicator">
            <span class="status-dot"></span>
            <span class="status-text">Ready</span>
        </div>
    </div>
</div>

<!-- Context Menu (hidden by default) -->
<div class="context-menu" id="context-menu">
    <div class="context-item" data-action="open">Open</div>
    <div class="context-item" data-action="drill-down">Drill Down</div>
    <div class="context-item" data-action="drill-up">Drill Up</div>
    <div class="context-divider"></div>
    <div class="context-item" data-action="attributes">View Attributes</div>
    <div class="context-item" data-action="deltas">View Deltas</div>
    <div class="context-item" data-action="metadata">View Metadata</div>
    <div class="context-divider"></div>
    <div class="context-item" data-action="dedupe">Deduplicate</div>
</div>
{% endblock %}

{% block extra_scripts %}
<script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>
{% endblock %}

