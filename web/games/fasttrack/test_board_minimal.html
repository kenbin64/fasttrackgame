<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Board Render Test - Minimal</title>
    <style>
        body { margin: 0; background: #1a1a2e; color: #fff; font-family: Arial; }
        #info { position: fixed; top: 10px; left: 10px; background: rgba(0,0,0,0.8); padding: 15px; border-radius: 8px; z-index: 10000; max-width: 400px; }
        .pass { color: #4ade80; }
        .fail { color: #ef4444; }
        .pending { color: #fbbf24; }
    </style>
</head>
<body>
    <div id="info">
        <h3>ğŸ§ª Board Render Test</h3>
        <div id="status">Loading...</div>
    </div>
    
    <!-- Three.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    
    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    
    <!-- Dimensional Substrates -->
    <script src="observation_substrate.js"></script>
    <script src="intent_manifold.js"></script>
    <script src="potential_substrate.js"></script>
    
    <!-- VR ESP -->
    <script src="vr_esp.js"></script>
    
    <script>
        const status = document.getElementById('status');
        let tests = [];
        
        function addTest(name, result) {
            const className = result === true ? 'pass' : result === false ? 'fail' : 'pending';
            const icon = result === true ? 'âœ…' : result === false ? 'âŒ' : 'â³';
            tests.push(`<div class="${className}">${icon} ${name}</div>`);
            status.innerHTML = tests.join('');
        }
        
        // Test 1: THREE.js loaded
        addTest('THREE.js loaded', typeof THREE !== 'undefined');
        
        // Test 2: jQuery loaded
        addTest('jQuery loaded', typeof $ !== 'undefined');
        
        // Test 3: ObservationSubstrate loaded
        addTest('ObservationSubstrate loaded', typeof ObservationSubstrate !== 'undefined');
        
        // Test 4: IntentManifold loaded
        addTest('IntentManifold loaded', typeof IntentManifold !== 'undefined');
        
        // Test 5: PotentialSubstrate loaded
        addTest('PotentialSubstrate loaded', typeof PotentialSubstrate !== 'undefined');
        
        // Test 6: VR ESP loaded
        addTest('VR ESP loaded', typeof VRLens !== 'undefined');
        
        // Test 7: Create basic scene
        try {
            const scene = new THREE.Scene();
            const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            const renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            document.body.appendChild(renderer.domElement);
            
            // Add a simple cube
            const geometry = new THREE.BoxGeometry();
            const material = new THREE.MeshBasicMaterial({ color: 0x00ff00 });
            const cube = new THREE.Mesh(geometry, material);
            scene.add(cube);
            
            camera.position.z = 5;
            
            // Store globally for VR
            window.scene = scene;
            window.camera = camera;
            window.renderer = renderer;
            
            // Render once
            renderer.render(scene, camera);
            
            addTest('THREE.js scene created', true);
            addTest('Renderer working', true);
            
            // Animate
            function animate() {
                requestAnimationFrame(animate);
                cube.rotation.x += 0.01;
                cube.rotation.y += 0.01;
                renderer.render(scene, camera);
            }
            animate();
            
            addTest('Animation loop started', true);
            
        } catch (e) {
            addTest('THREE.js scene created', false);
            addTest('Error: ' + e.message, false);
        }
        
        // Test 8: Check for errors
        window.onerror = function(msg, src, line) {
            addTest(`Error: ${msg} at ${src}:${line}`, false);
        };
        
        // Test 9: Wait for window.onload
        setTimeout(() => {
            addTest('window.onload fired', true);
            addTest('VR ESP initialized', typeof window.VREntangledSubstrate !== 'undefined');
        }, 1000);
        
        // Summary
        setTimeout(() => {
            const passCount = tests.filter(t => t.includes('pass')).length;
            const failCount = tests.filter(t => t.includes('fail')).length;
            tests.push(`<hr><div><strong>Results: ${passCount} passed, ${failCount} failed</strong></div>`);
            tests.push(`<div><a href="lobby.html" style="color: #4ade80;">â† Back to Lobby</a></div>`);
            status.innerHTML = tests.join('');
        }, 2000);
    </script>
</body>
</html>

