<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}ButterflyFx Platform{% endblock %}</title>
    
    <!-- Common Platform Styles -->
    <link rel="stylesheet" href="{{ url_for('static', filename='platform.css') }}">
    
    <!-- Product-specific styles -->
    {% block styles %}{% endblock %}
</head>
<body>
    <!-- Common Navigation Bar -->
    <nav class="platform-navbar">
        <div class="navbar-container">
            <!-- Logo and Brand -->
            <div class="navbar-brand">
                <a href="{{ url_for('dashboard') }}">
                    <span class="logo">ü¶ã</span>
                    <span class="brand-name">ButterflyFx</span>
                </a>
            </div>
            
            <!-- Main Navigation -->
            <div class="navbar-menu">
                <!-- Products Dropdown -->
                <div class="navbar-item dropdown">
                    <button class="dropdown-toggle">
                        Products <span class="arrow">‚ñº</span>
                    </button>
                    <div class="dropdown-menu">
                        <a href="{{ url_for('python_api_home') }}" class="dropdown-item">
                            <span class="icon">üêç</span>
                            <div class="item-content">
                                <div class="item-title">Python API</div>
                                <div class="item-desc">Build apps with dimensional substrates</div>
                            </div>
                            {% if current_user and current_user.has_product_access('PYTHON_API') %}
                            <span class="badge">Active</span>
                            {% else %}
                            <span class="badge locked">üîí</span>
                            {% endif %}
                        </a>
                        
                        <a href="{{ url_for('universal_connector_home') }}" class="dropdown-item">
                            <span class="icon">üîó</span>
                            <div class="item-content">
                                <div class="item-title">Universal Connector</div>
                                <div class="item-desc">Connect to any data source</div>
                            </div>
                            {% if current_user and current_user.has_product_access('UNIVERSAL_CONNECTOR') %}
                            <span class="badge">Active</span>
                            {% else %}
                            <span class="badge locked">üîí Basic+</span>
                            {% endif %}
                        </a>
                        
                        <a href="{{ url_for('universal_harddrive_home') }}" class="dropdown-item">
                            <span class="icon">üñ¥</span>
                            <div class="item-content">
                                <div class="item-title">Universal Hard Drive</div>
                                <div class="item-desc">Dimensional storage explorer</div>
                            </div>
                            {% if current_user and current_user.has_product_access('UNIVERSAL_HARDDRIVE') %}
                            <span class="badge">Active</span>
                            {% else %}
                            <span class="badge locked">üîí Pro+</span>
                            {% endif %}
                        </a>
                        
                        <div class="dropdown-divider"></div>
                        
                        <a href="{{ url_for('products') }}" class="dropdown-item">
                            <span class="icon">üì¶</span>
                            <div class="item-content">
                                <div class="item-title">All Products</div>
                            </div>
                        </a>
                    </div>
                </div>
                
                <!-- Documentation -->
                <a href="{{ url_for('docs') }}" class="navbar-item">
                    <span class="icon">üìö</span>
                    Documentation
                </a>
                
                <!-- Pricing -->
                <a href="{{ url_for('pricing') }}" class="navbar-item">
                    <span class="icon">üí≥</span>
                    Pricing
                </a>
                
                <!-- Packages -->
                <div class="navbar-item dropdown">
                    <button class="dropdown-toggle">
                        Packages <span class="arrow">‚ñº</span>
                    </button>
                    <div class="dropdown-menu">
                        <a href="{{ url_for('package_python') }}" class="dropdown-item">
                            <span class="icon">üêç</span>
                            <div class="item-content">
                                <div class="item-title">Python</div>
                                <div class="item-desc">pip install butterflyfx</div>
                            </div>
                        </a>
                        
                        <a href="{{ url_for('package_nodejs') }}" class="dropdown-item">
                            <span class="icon">üìó</span>
                            <div class="item-content">
                                <div class="item-title">Node.js</div>
                                <div class="item-desc">npm install butterflyfx</div>
                            </div>
                            <span class="badge coming-soon">Coming Soon</span>
                        </a>
                        
                        <a href="{{ url_for('package_java') }}" class="dropdown-item">
                            <span class="icon">‚òï</span>
                            <div class="item-content">
                                <div class="item-title">Java</div>
                                <div class="item-desc">Maven/Gradle</div>
                            </div>
                            <span class="badge coming-soon">Coming Soon</span>
                        </a>
                        
                        <a href="{{ url_for('package_cpp') }}" class="dropdown-item">
                            <span class="icon">‚öôÔ∏è</span>
                            <div class="item-content">
                                <div class="item-title">C++</div>
                                <div class="item-desc">Header library</div>
                            </div>
                            <span class="badge coming-soon">Coming Soon</span>
                        </a>
                        
                        <a href="{{ url_for('package_go') }}" class="dropdown-item">
                            <span class="icon">üêπ</span>
                            <div class="item-content">
                                <div class="item-title">Go</div>
                                <div class="item-desc">go get butterflyfx</div>
                            </div>
                            <span class="badge coming-soon">Coming Soon</span>
                        </a>
                    </div>
                </div>
            </div>
            
            <!-- User Menu -->
            <div class="navbar-user">
                {% if current_user %}
                <div class="navbar-item dropdown">
                    <button class="dropdown-toggle user-button">
                        <span class="user-avatar">{{ current_user.username[0].upper() }}</span>
                        <span class="user-name">{{ current_user.username }}</span>
                        <span class="arrow">‚ñº</span>
                    </button>
                    <div class="dropdown-menu dropdown-menu-right">
                        <div class="dropdown-header">
                            <div class="user-info">
                                <div class="user-email">{{ current_user.email }}</div>
                                <div class="user-role">{{ current_user.role.value.title() }} Plan</div>
                            </div>
                        </div>
                        
                        <div class="dropdown-divider"></div>
                        
                        <a href="{{ url_for('dashboard') }}" class="dropdown-item">
                            <span class="icon">üè†</span> Dashboard
                        </a>
                        <a href="{{ url_for('account') }}" class="dropdown-item">
                            <span class="icon">‚öôÔ∏è</span> Account Settings
                        </a>
                        <a href="{{ url_for('billing') }}" class="dropdown-item">
                            <span class="icon">üí≥</span> Billing
                        </a>
                        <a href="{{ url_for('api_keys') }}" class="dropdown-item">
                            <span class="icon">üîë</span> API Keys
                        </a>
                        
                        <div class="dropdown-divider"></div>
                        
                        <a href="{{ url_for('logout') }}" class="dropdown-item">
                            <span class="icon">üö™</span> Logout
                        </a>
                    </div>
                </div>
                {% else %}
                <a href="{{ url_for('login') }}" class="navbar-item btn-login">Login</a>
                <a href="{{ url_for('register') }}" class="navbar-item btn-register">Sign Up</a>
                {% endif %}
            </div>
        </div>
    </nav>
    
    <!-- Main Content -->
    <main class="platform-content">
        {% block content %}{% endblock %}
    </main>
    
    <!-- Common Platform Scripts -->
    <script src="{{ url_for('static', filename='platform.js') }}"></script>
    
    <!-- Product-specific scripts -->
    {% block scripts %}{% endblock %}
</body>
</html>

